<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Panel de Estudiante - Campo Cl√≠nico UNAB</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{
      --sidebar-bg-top:#022a66;
      --sidebar-bg-bottom:#011537;
      --sidebar-border:#001229;
      --sidebar-text:#e5efff;
      --sidebar-muted:#9fb4dd;
      --sidebar-active:#ffd000;

      --bg-page:#f4f7fc;
      --card-bg:#ffffff;
      --card-border:#dde3f0;
      --card-shadow:0 14px 32px rgba(15,23,42,.12);

      --text-main:#0f172a;
      --text-muted:#6b7280;
      --pill-bg:#e5edff;
      --pill-border:#c7d2fe;

      --accent:#0b3a7e;
      --accent-pill:#0b3a7e;

      --radius-card:18px;
    }

    *{ box-sizing:border-box; }

    html, body{
      margin:0;
      padding:0;
      height:100%;
    }

    body{
      font-family:system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:var(--bg-page);
      color:var(--text-main);
      display:flex;
    }

    .app-shell{
      display:flex;
      width:100%;
      min-height:100vh;
    }

    /* ========== SIDEBAR ========== */

    .sidebar{
      width:260px;
      background:linear-gradient(180deg,var(--sidebar-bg-top),var(--sidebar-bg-bottom));
      border-right:1px solid var(--sidebar-border);
      color:var(--sidebar-text);
      padding:18px 18px 20px;
      display:flex;
      flex-direction:column;
      position:fixed;
      inset:0 auto 0 0;
      z-index:10;
    }

    .sidebar-top{ margin-bottom:18px; }

    .brand-title{
      font-size:0.78rem;
      letter-spacing:0.18em;
      text-transform:uppercase;
      color:var(--sidebar-muted);
      margin-bottom:2px;
    }

    .brand-main{
      font-weight:600;
      font-size:0.98rem;
    }

    .user-box{
      margin-top:12px;
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 10px;
      border-radius:12px;
      background:rgba(0,0,0,.16);
      border:1px solid rgba(15,23,42,.55);
    }

    .user-avatar{
      width:36px;
      height:36px;
      border-radius:999px;
      background:#ffd000;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      color:#1f2937;
      font-size:0.9rem;
      flex-shrink:0;
    }

    .user-info{ min-width:0; }

    .user-info strong{
      display:block;
      font-size:0.86rem;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .user-info small{
      display:block;
      font-size:0.75rem;
      color:var(--sidebar-muted);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .nav-label{
      margin:14px 2px 6px;
      font-size:0.72rem;
      letter-spacing:0.18em;
      text-transform:uppercase;
      color:var(--sidebar-muted);
    }

    .nav{
      list-style:none;
      margin:0;
      padding:0;
      display:flex;
      flex-direction:column;
      gap:2px;
    }

    .nav-link{
      display:flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:10px;
      font-size:0.86rem;
      color:var(--sidebar-text);
      text-decoration:none;
      cursor:pointer;
      transition:background .15s ease, transform .12s ease;
      justify-content:flex-start;
    }

    .nav-main{
      display:flex;
      align-items:center;
      gap:8px;
    }

    .nav-dot{
      width:18px;
      height:18px;
      border-radius:999px;
      border:1px solid rgba(203,213,225,.6);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:0.72rem;
    }

    .nav-link:hover{
      background:rgba(15,23,42,.55);
      transform:translateY(-1px);
    }

    .nav-link.active{
      background:var(--sidebar-active);
      color:#111827;
    }

    .sidebar-footer{
      margin-top:auto;
      padding-top:10px;
      border-top:1px solid rgba(15,23,42,.7);
    }

    .btn-logout{
      width:100%;
      padding:9px 10px;
      border-radius:9px;
      border:1px solid rgba(15,23,42,.8);
      background:#f9fafb;
      color:#111827;
      font-size:0.85rem;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      cursor:pointer;
      transition:background .15s ease, transform .1s ease, box-shadow .15s ease;
    }

    .btn-logout span.icon{ font-size:0.9rem; }

    .btn-logout:hover{
      background:#e5e7eb;
      box-shadow:0 10px 18px rgba(15,23,42,.35);
      transform:translateY(-1px);
    }

    /* ========== MAIN ========== */

    .main-wrapper{
      margin-left:260px;
      width:100%;
      min-height:100vh;
      padding:24px 26px 30px;
    }

    .main-content{
      max-width:1180px;
      margin:0 auto;
    }

    .page-header{
      margin:0 0 12px;
    }

    .page-header h1{
      margin:0 0 4px;
      font-size:1.35rem;
      font-weight:600;
      color:var(--accent);
    }

    .page-header p{
      margin:0;
      font-size:0.9rem;
      color:var(--text-muted);
      max-width:520px;
    }

    /* TARJETAS SUPERIORES */

    .status-row{
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(260px,1fr));
      gap:14px;
      margin-top:4px;
    }

    .status-card{
      background:var(--card-bg);
      border-radius:var(--radius-card);
      border:1px solid var(--card-border);
      box-shadow:var(--card-shadow);
      padding:14px 16px 15px;
      display:flex;
      flex-direction:column;
      gap:6px;
    }

    .status-label{
      font-size:0.7rem;
      text-transform:uppercase;
      letter-spacing:0.14em;
      color:#9ca3af;
    }

    .status-main{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:8px;
    }

    .status-value{
      font-size:1.4rem;
      font-weight:600;
      color:var(--text-main);
    }

    .status-text{
      font-size:1.05rem;
      font-weight:600;
      color:#16a34a;
    }

    .status-pill{
      display:inline-flex;
      align-items:center;
      padding:4px 9px;
      border-radius:999px;
      font-size:0.72rem;
      background:var(--pill-bg);
      border:1px solid var(--pill-border);
      color:var(--accent-pill);
      margin-top:2px;
    }

    /* BIENVENIDA */

    .welcome-card{
      background:var(--card-bg);
      border-radius:var(--radius-card);
      border:1px solid var(--card-border);
      box-shadow:var(--card-shadow);
      padding:18px 20px 18px;
      display:grid;
      grid-template-columns:minmax(0,1.4fr) minmax(220px,0.9fr);
      gap:20px;
      margin-bottom:14px;
      align-items:center;
    }

    .welcome-title{
      margin:0 0 6px;
      font-size:1.35rem;
      color:var(--accent);
    }

    .welcome-text{
      margin:0 0 10px;
      font-size:0.9rem;
      color:var(--text-muted);
    }

    .welcome-list{
      margin:0 0 10px 1.1rem;
      padding:0;
      font-size:0.88rem;
      color:var(--text-muted);
    }

    .welcome-tags{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-top:6px;
    }

    .tag-pill{
      display:inline-flex;
      align-items:center;
      padding:4px 9px;
      border-radius:999px;
      font-size:0.75rem;
      background:#0b3a7e;
      color:#f9fafb;
    }

    .welcome-logo-card{
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px 12px;
      border-radius:16px;
      background:radial-gradient(circle at top,#ffffff 0,#e5edff 55%,#e5e7eb 100%);
      border:1px solid #d4ddfb;
    }

    .welcome-logo-card img{
      max-width:220px;
      height:auto;
      display:block;
    }

    /* Bloque blanco que contiene "Panel de estudiante" + tarjetas */
    .home-panel{
      background:var(--card-bg);
      border-radius:var(--radius-card);
      border:1px solid var(--card-border);
      box-shadow:var(--card-shadow);
      padding:16px 18px 18px;
    }

    /* SECCIONES INTERNAS */

    .sections-wrapper{ margin-top:18px; }

    .section{
      display:none;
      animation:fadeIn .18s ease-out;
    }

    .section.active{ display:block; }

    .section-inner{
      background:var(--card-bg);
      border-radius:var(--radius-card);
      border:1px solid var(--card-border);
      box-shadow:var(--card-shadow);
      padding:16px 18px 18px;
      margin-bottom:18px;
    }

    .section-inner-header{
      display:flex;
      justify-content:space-between;
      align-items:baseline;
      gap:8px;
      margin-bottom:8px;
    }

    .section-inner-header h2{
      margin:0;
      font-size:1.05rem;
      color:var(--accent);
    }

    .section-inner-header span{
      font-size:0.8rem;
      color:var(--text-muted);
    }

    .section-inner-body{ margin-top:6px; }

    @keyframes fadeIn{
      from{ opacity:0; transform:translateY(4px); }
      to{ opacity:1; transform:none; }
    }

    /* RESPONSIVE */

    @media (max-width: 960px){
      .sidebar{
        position:static;
        width:100%;
        flex-direction:row;
        align-items:flex-start;
        padding:10px 14px;
      }
      .sidebar-top{ flex:1; }
      .main-wrapper{
        margin-left:0;
        padding:16px 14px 22px;
      }
      .welcome-card{
        grid-template-columns:minmax(0,1fr);
      }
      .welcome-logo-card{ justify-content:flex-start; }
    }

    @media (max-width: 640px){
      .sidebar{ flex-direction:column; }
      .welcome-card{ padding:14px 14px; }
      .status-row{ grid-template-columns:minmax(0,1fr); }
    }
  </style>
</head>

<body>
<div class="app-shell">

  <!-- ========== SIDEBAR ========== -->
  <aside class="sidebar">
    <div class="sidebar-top">
      <div class="brand-title">CAMPO CL√çNICO ¬∑ UNAB</div>
      <div class="brand-main">Panel de estudiante</div>

      <div class="user-box">
        <div class="user-avatar">
          {{ user.get_full_name|default:user.email|first|upper }}
        </div>
        <div class="user-info">
          <strong title="{{ user.get_full_name|default:user.email }}">
            {{ user.get_full_name|default:user.email }}
          </strong>
          <small>Estudiante ¬∑ Enfermer√≠a</small>
        </div>
      </div>

      <div class="nav-label">Navegaci√≥n</div>
      <ul class="nav">
        <li>
          <a href="#home" class="nav-link active" data-target="home">
            <div class="nav-main">
              <div class="nav-dot">üè†</div>
              <span>Inicio</span>
            </div>
          </a>
        </li>
        <li>
          <a href="#ficha" class="nav-link" data-target="ficha">
            <div class="nav-main">
              <div class="nav-dot">üìÑ</div>
              <span>Ficha estudiante</span>
            </div>
          </a>
        </li>
        <li>
          <a href="#soporte" class="nav-link" data-target="soporte">
            <div class="nav-main">
              <div class="nav-dot">üõü</div>
              <span>Soporte</span>
            </div>
          </a>
        </li>
      </ul>
    </div>

    <div class="sidebar-footer">
      <form method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit" class="btn-logout">
          <span class="icon">‚èè</span>
          <span>Cerrar sesi√≥n</span>
        </button>
      </form>
    </div>
  </aside>

  <!-- ========== MAIN ========== -->
  <div class="main-wrapper">
    <main class="main-content">

      <!-- INICIO: BIENVENIDA ARRIBA + PANEL DE ESTUDIANTE ABAJO -->
      <section id="home" class="section active">
        <!-- Bienvenida -->
        <article class="welcome-card">
          <div>
            <h2 class="welcome-title">Bienvenido a Campo Cl√≠nico</h2>
            <p class="welcome-text">
              Desde este panel podr√°s mantener actualizada tu Ficha Campo Cl√≠nico ‚Äì
              Enfermer√≠a, seg√∫n los requisitos de los centros de pr√°ctica.
            </p>
            <ul class="welcome-list">
              <li>Completa todos los pasos de la ficha antes del plazo indicado.</li>
              <li>Adjunta certificados en formato PDF o imagen legible.</li>
              <li>Revisa el estado de aprobaci√≥n de cada documento.</li>
            </ul>
            <div class="welcome-tags">
              <span class="tag-pill">Enfermer√≠a ¬∑ UNAB</span>
              <span class="tag-pill">Campos Cl√≠nicos</span>
              <span class="tag-pill">Gesti√≥n de ficha</span>
            </div>
          </div>

          <div class="welcome-logo-card">
            <img
              src="https://vinculacion.unab.cl/wp-content/uploads/2018/06/fondo-transparente-logo-color-con-texto-azul-300x252.png"
              alt="Universidad Andr√©s Bello">
          </div>
        </article>

        <!-- Panel de estudiante + tarjetas de progreso -->
        <div class="home-panel">
          <header class="page-header">
            <h1>Panel de estudiante</h1>
            <p>
              Completa tu ficha, adjunta certificados y revisa el estado de tus
              antecedentes para campos cl√≠nicos.
            </p>
          </header>

          <div class="status-row">
            <!-- FICHA ESTUDIANTE -->
            <article class="status-card">
              <div class="status-label">FICHA ESTUDIANTE</div>
              <div class="status-main">
                <div class="status-value">0%</div>
              </div>
              <div class="status-pill">
                Progreso total de la ficha
              </div>
            </article>

            <!-- ESTADO DE REVISI√ìN -->
            <article class="status-card">
              <div class="status-label">ESTADO DE REVISI√ìN</div>
              <div class="status-main">
                <div class="status-text">En revisi√≥n</div>
              </div>
              <div class="status-pill">
                Coordinaci√≥n campo cl√≠nico
              </div>
            </article>
          </div>
        </div>
      </section>

      <!-- SECCIONES INTERNAS -->
      <div class="sections-wrapper">

        <section id="ficha" class="section">
          <div class="section-inner">
            <div class="section-inner-header">
              <h2>Ficha del estudiante</h2>
              <span>Completa y actualiza tus datos personales y antecedentes.</span>
            </div>
            <div class="section-inner-body">
              {% include "dashboards/ficha.html" %}
            </div>
          </div>
        </section>

        <section id="antecedentes" class="section">
          <div class="section-inner">
            <div class="section-inner-header">
              <h2>Resumen de antecedentes</h2>
              <span>Visualiza la informaci√≥n registrada para campos cl√≠nicos.</span>
            </div>
            <div class="section-inner-body">
              {% include "dashboards/antecedentes.html" %}
            </div>
          </div>
        </section>

        <section id="certificados" class="section">
          <div class="section-inner">
            <div class="section-inner-header">
              <h2>Certificados</h2>
              <span>Sube y gestiona tus documentos obligatorios.</span>
            </div>
            <div class="section-inner-body">
              {% include "dashboards/certificados.html" %}
            </div>
          </div>
        </section>

        <section id="soporte" class="section">
          <div class="section-inner">
            <div class="section-inner-header">
              <h2>Soporte y ayuda</h2>
              <span>Canales de apoyo y preguntas frecuentes.</span>
            </div>
            <div class="section-inner-body">
              {% include "dashboards/soporte.html" %}
            </div>
          </div>
        </section>

      </div>

    </main>
  </div>
</div>

<script>
  (function(){
    const links    = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('.section');

    function showSection(id){
      sections.forEach(sec => {
        if(sec.id === id){
          sec.classList.add('active');
        } else {
          sec.classList.remove('active');
        }
      });

      links.forEach(link => {
        if(link.dataset.target === id){
          link.classList.add('active');
        } else {
          link.classList.remove('active');
        }
      });
    }

    links.forEach(link => {
      link.addEventListener('click', function(e){
        e.preventDefault();
        const id = this.dataset.target;
        if(!id) return;
        showSection(id);
        history.replaceState(null, '', '#' + id);
      });
    });

    const validIds = ['home','ficha','antecedentes','certificados','soporte'];
    const initial  = (location.hash || '#home').replace('#','');
    showSection(validIds.includes(initial) ? initial : 'home');
  })();
</script>
</body>
</html>
